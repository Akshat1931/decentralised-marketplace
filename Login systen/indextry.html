<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Sign In</title>
</head>
<body>
    <h2>User Sign In</h2>
    <form id="signInForm">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required><br>
        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br>

        <input type="submit" value="Sign In">
    </form>

    <script>
        document.getElementById("signInForm").addEventListener("submit", function(event) {
            event.preventDefault();
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            // Call a function to store data in Web3 decentralized format (e.g., IPFS)
            storeUserData(username, password);
        });

        function storeUserData(username, password) {
            // Implement the logic to store data in IPFS or another decentralized storage solution here
            // For simplicity, you can use the IPFS HTTP API
            // Note: In a real-world scenario, you would handle this server-side with proper security measures.

            // Example:
            const userData = { username, password };
            const jsonData = JSON.stringify(userData);

            // Assuming you have a running IPFS daemon
            fetch('http://localhost:5001/api/v0/add', {
                method: 'POST',
                body: new URLSearchParams({
                    'arg': new TextEncoder().encode(jsonData),
                    'pin': 'true',
                }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('IPFS Content Address:', data.Hash);
                alert('User data stored in IPFS. Content Address: ' + data.Hash);
            })
            .catch(error => {
                console.error('Error storing data in IPFS:', error);
                alert('Error storing user data. Please try again.');
            });
        }
    </script>
</body>
</html>
